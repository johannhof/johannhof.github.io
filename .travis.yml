sudo: false
language: rust
cache: cargo
before_script:
- cargo install cobalt-bin || true
- export PATH="$PATH:/home/travis/.cargo/bin"
script:
- mkdir build && cobalt build
after_success: |
  [ $TRAVIS_BRANCH = source ] &&
  [ $TRAVIS_PULL_REQUEST = false ] &&
  cobalt import --branch master &&
  git config user.name "Cobalt Site Deployer" &&
  git config user.email "mail@johann-hofmann.com" &&
  git push -fq https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git master
env:
  global:
    secure: G4oXam1/DW6DhqQNJ+Ln0Lz2+3NFIeAMqzDlz6CH0jitv0PgChnP5aHWGZAG3j4NgI3o5nbc/hA1uEIwDVAsXAu652GVA0oXc/HSEeq6GNEWOGdCsze2Vyj/alLx9HHdwJHFvTV0rIhy/9QU4U6wxsJ9Yay3/y61+VyhHCTWhAQ=
